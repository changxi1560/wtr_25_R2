# wtr_25_R2
2025年RC R2上层机构代码

架构编写：黄梓源，拍球部分代码编写：李绮曼，抛射部分代码编写：黄贤君、黄梓源；通信部分代码编写：黄贤君，遥控器部分代码编写：侯颛

## 功能介绍
本代码中包含以下几个部分：

1. 整体状态机线程（ThrowHSMTask）
2. 拍球指令线程（BounceTask）
3. 抛射指令线程（ThrowTask）
4. 执行器线程（UnitreeExecutorTask，DJIExecutorTask）
5. 遥控器收发线程（RmctlTask，RmctlTransmitTask）
6. 与上位机，底盘通信线程（CommunicationTask）
7. 初始化线程（InitTask,ReadyTask）
8. 一些必要的库（usercode中的lib文件夹）

### 模块介绍
#### 拍球模块
本次拍球采用气缸拍球的形式，气缸通过电磁阀控制，为了保证每一次球回弹高度基本一致并成功夹到，采用了稳压阀 + 张开爪子之后延时一段时间再夹住的方式，拍球气缸压强大概在 5 atm 左右为宜，抽屉气缸压强大概在 4 atm - 5 atm 为宜

#### 抛射模块
本次抛射采用共轴双宇树的形式，为控制出手速度，采用对力臂进行前馈补偿，抵消重力矩的方式，使机械臂运动过程近似为匀角加速运动

### 一些注意的点
1. 共轴双宇树需要保证两个宇树电机的参数大小完全一致，方向相反，同时建议只使用前馈力矩，有能力的话可以尝试双宇树力位混合控制（效果不保证会比只是用前馈力矩好）
2. 3508电机与2006电机尽量不要直接用电流环控制，堵转时间过长的话电机会过热，同时可能导致内部结构出现不可逆转问题
3. 宇树如果在负载大的情况下使用多次会出现过热发疯现象（自身给的力巨大并且不受单片机控制），建议使用次数多了之后摸一下电机感受温度，最大尽量不要超过40-50℃
4. 宇树自身的输出并不是很稳定，同一套参数的输出结果并不完全相同，建议如果不是需要很大的力矩转动的情况或者需要高精度控制的情况不要使用宇树
